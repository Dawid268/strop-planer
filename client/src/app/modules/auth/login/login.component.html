<div
  class="auth-container flex align-items-center justify-content-center min-h-screen p-4"
  *transloco="let t"
>
  <p-card [header]="t('auth.loginSubtitle')" class="auth-card shadow-4">
    <ng-template pTemplate="header">
      <div class="flex align-items-center gap-3 p-4 pb-0">
        <i class="pi pi-th-large text-primary text-4xl"></i>
        <h1 class="text-2xl font-bold m-0 text-900">Szalunki Optimizer</h1>
      </div>
    </ng-template>

    <form
      (ngSubmit)="onSubmit()"
      #loginForm="ngForm"
      class="flex flex-column gap-4"
    >
      <div class="flex flex-column gap-2">
        <label for="email" class="font-medium text-900">{{
          t("auth.email")
        }}</label>
        <p-iconField iconPosition="right">
          <p-inputIcon styleClass="pi pi-envelope"></p-inputIcon>
          <input
            id="email"
            pInputText
            type="email"
            name="email"
            [ngModel]="email()"
            (ngModelChange)="email.set($event)"
            required
            email
            class="w-full"
            [placeholder]="t('auth.email')"
          />
        </p-iconField>
      </div>

      <div class="flex flex-column gap-2">
        <label for="password" class="font-medium text-900">{{
          t("auth.password")
        }}</label>
        <p-password
          id="password"
          [ngModel]="password()"
          (ngModelChange)="password.set($event)"
          name="password"
          [toggleMask]="true"
          [feedback]="false"
          required
          minLength="6"
          styleClass="w-full"
          inputStyleClass="w-full"
          [placeholder]="t('auth.password')"
        ></p-password>
      </div>

      @if (store.error()) {
        <p-message
          severity="error"
          [text]="t('auth.loginError')"
          class="w-full"
        ></p-message>
      }

      <p-button
        type="submit"
        class="w-full mt-2"
        [disabled]="!loginForm.valid || store.loading()"
        [loading]="store.loading()"
      >
        <ng-template pTemplate="content">
          @if (store.loading()) {
            <p-progressSpinner
              styleClass="w-2rem h-2rem"
              strokeWidth="4"
            ></p-progressSpinner>
          } @else {
            <span class="w-full text-center font-bold">{{
              t("auth.login")
            }}</span>
          }
        </ng-template>
      </p-button>
    </form>

    <ng-template pTemplate="footer">
      <div class="flex justify-content-end mt-2">
        <a
          pButton
          routerLink="/register"
          class="p-button-text p-button-sm"
          [label]="t('auth.noAccount') + ' ' + t('auth.register')"
          [attr.aria-label]="t('auth.noAccount') + ' ' + t('auth.register')"
        ></a>
      </div>
    </ng-template>
  </p-card>
</div>
